<idea-plugin>
    <id>com.dsg.k-plugin</id>
    <name>K-a</name>
    <vendor url="https://ww1w.yourcompany.com">YourC1ompany</vendor>
    <version>1.0.0</version>
    <description>k-plugin desc1231231231231231231231233333</description>

    <depends>com.intellij.modules.platform</depends>
    <depends>Git4Idea</depends>
<!--    <depends>org.jetbrains.kotlin</depends>-->
    <depends optional="true" config-file="kotlin-compatibility.xml">org.jetbrains.kotlin</depends>

    <extensions defaultExtensionNs="com.intellij">
        <toolWindow
                id="Migrations"
                anchor="left"
                factoryClass="com.dsg.kplugin.components.settings.migration.MigrationToolWindowFactory"
                icon="/icons/pluginIcon.svg"
        />
        <postStartupActivity implementation="com.dsg.kplugin.components.startup.LoadUserOnStartup"/>

        <projectConfigurable
                id="com.dsg.kplugin.settings"
                instance="com.dsg.kplugin.components.settings.main.SettingsMainPageConfigurable"
                displayName="K-Plugin"/>

        <projectConfigurable
                parentId="com.dsg.kplugin.settings"
                id="com.dsg.kplugin.settings.migrations"
                displayName="Миграции"
                instance="com.dsg.kplugin.components.settings.migration.MigrationSettingsConfigurable"/>

        <projectConfigurable
                parentId="com.dsg.kplugin.settings"
                id="com.dsg.kplugin.settings.git"
                displayName="Git"
                instance="com.dsg.kplugin.components.settings.migration.MigrationSettingsConfigurable"/>

        <projectConfigurable
                parentId="com.dsg.kplugin.settings.migrations"
                id="com.dsg.kplugin.settings.migrations.mapping"
                displayName="Mapping"
                instance="com.dsg.kplugin.components.settings.migration.MigrationSettingsMappingConfigurable"/>
    </extensions>

    <actions>
        <group id="CreateMigrationGroup"
               class="com.dsg.kplugin.actions.migration.CreateMigrationGroup"
               popup="true">
            <add-to-group group-id="ProjectViewPopupMenu" anchor="first"/>
        </group>
        <action id="com.dsg.kplugin.OpenPluginSettingsAction"
                class="com.dsg.kplugin.actions.settings.OpenPluginSettingsAction"
                text="Настройки"
                description="Открыть настройки плагина"/>

        <group id="KPluginClassActionsGroup"
               text="K-Plugin"
               description="Действия K-Plugin"
               popup="true">
            <add-to-group group-id="EditorPopupMenu" anchor="first"/>
            <action
                    id="com.dsg.kplugin.actions.migration.GenerateSqlMigrationAction"
                    class="com.dsg.kplugin.actions.migration.GenerateSqlMigrationAction"
                    text="Создать Миграцию"
                    description="Сгенерировать SQL миграцию для выбранного Kotlin класса"
                    icon="AllIcons.Actions.Execute"/>
            />
        </group>
    </actions>
</idea-plugin>